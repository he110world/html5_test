<!DOCTYPE html>
<html lang="zh-CN">
	<head>
		<title> hello world </title>
		<script type="text/javascript">
			function helloWorld()
			{
				function printHelloWorld()
				{
					alert( "给你带绿帽子!" );
				}
				
				printHelloWorld();
			}
		</script>
		
		<script type="text/javascript" src="helloworld.js"></script>	
	</head>

	<!--******************************************************************************-->
	
	<body>
			<h1>Test</h1>	<!--heading-->

			<canvas id="myCanvas" width="400" height="400">
				浏览器不支持canvas的话这儿就有字
			</canvas>	<!--canvas应该在script调用之前定义，否则画不出东西-->			
						
			<script type="text/javascript">
				/*
					在chrome下debug: F12 -> Scripts
				*/
				var x = 0;
				var y = 0;
				var canvas;
				var context;
				var mx = 0;
				var my = 0;
				var loaded = false;
				var imageObj;
				
				function init()
				{
					window.onkeydown = keyDownControl;
					window.onkeyup = keyUpControl;
					canvas = document.getElementById("myCanvas");			
					context = canvas.getContext("2d");
					
					imageObj = new Image();
					imageObj.src = "superbrothers_pixel_sports.jpg";
					imageObj.onload = function(){
						context.drawImage(imageObj, x, y);	<!--应该在onload里面做，否则load没完成时调没有任何效果-->
						loaded = true;
					};
					
					return setInterval( draw, 10 );
				}
				
				function draw()
				{
					if( loaded )
					{
						context.drawImage(imageObj, x, y);
					}
					
					x += mx;
					y += my;
				}
				
				function keyDownControl(event)
				{
					if(event.keyCode==37) {
						mx = -2;
						my = 0;
					} else
					if (event.keyCode==38) {
						mx = 0;
						my = -2;
					} else if
					(event.keyCode==39) {
						mx = 2;
						my = 0;
					} else
					if (event.keyCode==40) {
						mx = 0;
						my = 2;
					}
				}
			
				function keyUpControl(event)
				{
					if(event.keyCode>=37 && event.keyCode<=40) {
						mx = 0;
						my = 0;
					}
				}
				
				init();
				//context.fillStyle="#FF0000"
				//context.fillRect(0,0,200,200);
				


				//helloWorld();
				//fuckYouAll();
			</script>		
	</body>
</html>